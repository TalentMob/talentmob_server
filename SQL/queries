SELECT videos.id,
videos.user_id,
videos.categories,
videos.downvotes,
videos.upvotes,
videos.shares,
videos.views,
videos.comments,
videos.thumbnail,
videos.key,
videos.title,
videos.created_at,
videos.updated_at,
videos.is_active,

FROM videos
LEFT JOIN boosts
ON boosts.video_id = videos.id

WHERE videos.id NOT IN (select video_id from votes where user_id = 1)
AND videos.user_id != 1
AND videos.is_active = true
ORDER BY videos.created_at DESC, boosts.end_time DESC
LIMIT 10
OFFSET 0 
;

    SELECT *
    FROM (
        (SELECT
            1 as priority,
            videos.id,
            videos.user_id,
            videos.categories,
            videos.downvotes,
            videos.upvotes,
            videos.shares,
            videos.views,
            videos.comments,
            videos.thumbnail,
            videos.key,
            videos.title,
            videos.created_at,
            videos.updated_at,
            videos.is_active
            FROM boosts
            INNER JOIN videos
            ON videos.id = boosts.video_id
            AND videos.user_id != 10
            AND videos.is_active = true
            AND videos.id NOT IN (SELECT id FROM votes WHERE video_id = videos.id AND user_id = 10)
            WHERE boosts.is_active = true
            AND boosts.end_time >= now()
            ORDER BY end_time DESC

        ) UNION ALL (
        SELECT
            2 as priority,
            videos.id,
            videos.user_id,
            videos.categories,
            videos.downvotes,
            videos.upvotes,
            videos.shares,
            videos.views,
            videos.comments,
            videos.thumbnail,
            videos.key,
            videos.title,
            videos.created_at,
            videos.updated_at,
            videos.is_active
         FROM videos
         WHERE videos.id NOT IN (select video_id from votes where user_id = 10)
         AND videos.user_id != 10
         AND videos.is_active = true
         ORDER BY created_at DESC
         LIMIT 100
         OFFSET 0
         )) as feed
    LIMIT 10
    OFFSET 0;

